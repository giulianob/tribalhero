package src.Objects
{
    import flash.display.DisplayObject;
    import flash.events.Event;
    import flash.geom.Point;

    import src.Global;
    import src.Map.TileLocator;
    import src.Objects.Factories.ObjectFactory;

    public class WallManager
	{
		private static const WALL_WIDTH: int = 11;

		private static const WALL_HEIGHT: int = 24;

		private static const WALLS: Array = [
		// Radius 0
		[],
		// Radius 1
		[],
		// Radius 2		
        [
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "SE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "SE", "NE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "SE", "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "",   "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "",   "",   "",   "E", "",   "",   "",   ],
                ["",   "",   "",   "W", "",   "",   "O4", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "SW", "",   "O1", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "SW", "SE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "S", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
            ],
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "N", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "NW", "NE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "O1", "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "",   "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "",   "",   "",   "O1", "",   "",   "",   ],
                ["",   "",   "",   "SW", "",   "",   "SE", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "SW", "",   "SE", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "SW", "SE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "S", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],      
            ]
        ],
		// Radius 3
		[],
		// Radius 4
		[
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "O4", "O3", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "NW", "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "SE", "",   "",   "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "O3", "",   "",   "",   "",   "O2", "",   "",   "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "SW", "",   "",   "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "",   "O3", "",   "",   ],
                ["NW", "",   "",   "",   "",   "",   "",   "",   "NE", "",   "",   ],
                ["O2", "",   "",   "",   "",   "",   "",   "",   "",   "NE", "",   ],
                ["SW", "",   "",   "",   "",   "",   "",   "",   "",   "E", "",   ],
                ["",   "O3", "",   "",   "",   "",   "",   "",   "",   "SE", "",   ],
                ["",   "NE", "",   "",   "",   "",   "",   "",   "O3", "",   "",   ],
                ["",   "",   "NE", "",   "",   "",   "",   "",   "NW", "",   "",   ],
                ["",   "",   "O2", "",   "",   "",   "",   "NW", "",   "",   "",   ],
                ["",   "",   "",   "SW", "",   "",   "",   "O1", "",   "",   "",   ],
                ["",   "",   "",   "O3", "",   "",   "SE", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "O2", "",   "SE", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "SW", "SE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "S", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
            ],
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "N", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "NW", "NE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "NW", "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "O4", "",   "",   "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "NW", "",   "",   "",   "",   "O2", "",   "",   "",   ],
                ["",   "W", "",   "",   "",   "",   "",   "SW", "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "O3", "",   "",   ],
                ["N", "",   "",   "",   "",   "",   "",   "",   "NE", "",   "",   ],
                ["W", "",   "",   "",   "",   "",   "",   "",   "",   "NE", "",   ],
                ["O3", "",   "",   "",   "",   "",   "",   "",   "",   "E", "",   ],
                ["",   "NE", "",   "",   "",   "",   "",   "",   "",   "O4", "",   ],
                ["",   "NE", "",   "",   "",   "",   "",   "",   "O1", "",   "",   ],
                ["",   "",   "NE", "",   "",   "",   "",   "",   "SE", "",   "",   ],
                ["",   "",   "NE", "",   "",   "",   "",   "SE", "",   "",   "",   ],
                ["",   "",   "",   "O2", "",   "",   "",   "SE", "",   "",   "",   ],
                ["",   "",   "",   "O3", "",   "SE", "O3", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "O2", "SE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "S", "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
            ],
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "SE", "N", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "NW", "NE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "O4", "",   "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "O1", "",   "",   "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "O3", "",   "",   "",   "",   "NE", "",   "",   "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "NE", "",   "",   "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "",   "O2", "",   "",   ],
                ["NW", "",   "",   "",   "",   "",   "",   "",   "SW", "",   "",   ],
                ["W", "",   "",   "",   "",   "",   "",   "",   "",   "O3", "",   ],
                ["SW", "",   "",   "",   "",   "",   "",   "",   "",   "E", "",   ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "N", "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "NW", "NE", "",   ],
                ["",   "W", "",   "",   "",   "",   "",   "O1", "",   "",   "",   ],
                ["",   "",   "O3", "",   "",   "",   "",   "SE", "",   "",   "",   ],
                ["",   "",   "NE", "",   "",   "",   "SE", "",   "",   "",   "",   ],
                ["",   "",   "",   "NE", "O4", "SW", "SE", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "O3", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
            ],
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "N", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "NW", "E", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "NW", "",   "",   "W", "",   "",   "",   ],
                ["",   "",   "",   "O1", "",   "",   "",   "SW", "",   "",   "",   ],
                ["",   "",   "",   "SE", "",   "",   "",   "",   "SW", "",   "",   ],
                ["",   "",   "SE", "",   "",   "",   "",   "",   "SW", "",   "",   ],
                ["",   "",   "O3", "",   "",   "",   "",   "",   "",   "O3", "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "",   "",   "E", "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "",   "",   "O4", "",   ],
                ["NW", "",   "",   "",   "",   "",   "",   "",   "NW", "",   "",   ],
                ["W", "",   "",   "",   "",   "",   "",   "",   "O1", "",   "",   ],
                ["SW", "",   "",   "",   "",   "",   "",   "SE", "",   "",   "",   ],
                ["",   "SW", "",   "",   "",   "",   "",   "SE", "",   "",   "",   ],
                ["",   "SW", "",   "",   "",   "",   "SE", "",   "",   "",   "",   ],
                ["",   "",   "SW", "",   "",   "",   "SE", "",   "",   "",   "",   ],
                ["",   "",   "SW", "O4", "SW", "SE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "NW", "",   "O3", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
            ],
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "N", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "O1", "NE", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "SE", "",   "NE", "",   "",   "",   "",   ],
                ["",   "",   "",   "O4", "",   "",   "O2", "",   "",   "",   "",   ],
                ["",   "",   "",   "NW", "",   "",   "",   "O3", "",   "",   "",   ],
                ["",   "",   "NW", "",   "",   "",   "",   "NE", "",   "",   "",   ],
                ["",   "",   "NW", "",   "",   "",   "",   "",   "NE", "",   "",   ],
                ["",   "O1", "",   "",   "",   "",   "",   "",   "NE", "",   "",   ],
                ["",   "SE", "",   "",   "",   "",   "",   "",   "",   "E", "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "NE", "",   "",   "",   "",   "",   "",   "",   "NW", "",   ],
                ["",   "NE", "",   "",   "",   "",   "",   "",   "O1", "",   "",   ],
                ["",   "",   "O2", "",   "",   "",   "",   "",   "SE", "",   "",   ],
                ["",   "",   "SW", "",   "",   "",   "",   "SE", "",   "",   "",   ],
                ["",   "",   "",   "SW", "",   "",   "",   "SE", "",   "",   "",   ],
                ["",   "",   "",   "O3", "",   "",   "SE", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "SW", "SE", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "S", "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
            ],
		],
		// Radius 5
		[
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "O4", "SW", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "NW", "",   "SW", "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "NW", "",   "",   "SW", "",   "",   "",   ],
                ["",   "",   "",   "NW", "",   "",   "",   "S", "SW", "",   "",   ],
                ["",   "",   "",   "NW", "",   "",   "",   "",   "",   "SW", "",   ],
                ["",   "",   "W", "",   "",   "",   "",   "",   "",   "SW", "",   ],
                ["",   "",   "SE", "",   "",   "",   "",   "",   "",   "",   "SW", ],
                ["",   "SE", "",   "",   "",   "",   "",   "",   "",   "SE", "",   ],
                ["",   "SE", "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["SE", "",   "",   "",   "",   "",   "",   "",   "",   "NE", "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "E", ],
                ["O2", "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "",   "",   "E", ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "E", "",   "",   "",   "",   "",   "",   "",   "",   "E", ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "",   "SE", "",   ],
                ["",   "",   "SW", "",   "",   "",   "",   "",   "",   "SE", "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "SE", "",   "",   ],
                ["",   "",   "NE", "",   "",   "",   "",   "",   "SE", "",   "",   ],
                ["",   "",   "E", "",   "",   "",   "",   "SE", "",   "",   "",   ],
                ["",   "",   "",   "SW", "O4", "SW", "",   "O4", "",   "",   "",   ],
                ["",   "",   "",   "NW", "",   "S", "NW", "",   "",   "",   "",   ],
            ],
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "SE", "O4", "SW", "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "NW", "",   "SW", "",   "",   "",   "",   ],
                ["",   "",   "O4", "S", "",   "",   "",   "SW", "",   "",   "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "S", "SW", "",   "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "",   "",   "SW", "",   ],
                ["E", "",   "",   "",   "",   "",   "",   "",   "",   "SW", "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "SW", ],
                ["E", "",   "",   "",   "",   "",   "",   "",   "",   "SE", "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["NW", "",   "",   "",   "",   "",   "",   "",   "",   "NE", "",   ],
                ["W", "",   "",   "",   "",   "",   "",   "",   "",   "",   "NE", ],
                ["SW", "",   "",   "",   "",   "",   "",   "",   "",   "",   "E", ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "",   "",   "SE", ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "E", "",   "",   "",   "",   "",   "",   "",   "",   "E", ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "",   "SE", "",   ],
                ["",   "",   "SW", "",   "",   "",   "",   "",   "",   "SE", "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "SE", "",   "",   ],
                ["",   "",   "NE", "",   "",   "",   "",   "",   "SE", "",   "",   ],
                ["",   "",   "E", "",   "",   "",   "",   "SE", "",   "",   "",   ],
                ["",   "",   "",   "SW", "O4", "SW", "",   "O4", "",   "",   "",   ],
                ["",   "",   "",   "NW", "",   "S", "NW", "",   "",   "",   "",   ],
            ],
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "O4", "SW", "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "NW", "",   "S", "SW", "",   "",   "",   ],
                ["",   "",   "O4", "S", "",   "",   "",   "",   "O3", "",   "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "",   "NE", "",   "",   ],
                ["",   "NE", "",   "",   "",   "",   "",   "",   "",   "NE", "",   ],
                ["",   "E", "",   "",   "",   "",   "",   "",   "",   "NE", "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "E", ],
                ["",   "NW", "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "",   "",   "",   "E", ],
                ["NW", "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["W", "",   "",   "",   "",   "",   "",   "",   "",   "",   "NE", ],
                ["SW", "",   "",   "",   "",   "",   "",   "",   "",   "",   "E", ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "",   "",   "SE", ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "E", "",   "",   "",   "",   "",   "",   "",   "",   "E", ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "",   "SE", "",   ],
                ["",   "",   "SW", "",   "",   "",   "",   "",   "",   "SE", "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "SE", "",   "",   ],
                ["",   "",   "NE", "",   "",   "",   "",   "",   "O4", "",   "",   ],
                ["",   "",   "E", "",   "",   "",   "",   "NW", "",   "",   "",   ],
                ["",   "",   "",   "SW", "O4", "SW", "",   "NW", "",   "",   "",   ],
                ["",   "",   "",   "NW", "",   "S", "NW", "",   "",   "",   "",   ],
            ],
            [
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "O4", "SW", "",   "",   "",   "",   ],
                ["",   "",   "",   "SE", "NW", "",   "O3", "SW", "",   "",   "",   ],
                ["",   "",   "",   "S", "",   "",   "",   "NE", "O3", "",   "",   ],
                ["",   "",   "NW", "",   "",   "",   "",   "",   "NE", "",   "",   ],
                ["",   "",   "NW", "",   "",   "",   "",   "",   "",   "NE", "",   ],
                ["",   "E", "",   "",   "",   "",   "",   "",   "",   "E", "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "",   "",   "E", "",   ],
                ["",   "NW", "",   "",   "",   "",   "",   "",   "",   "",   "O3", ],
                ["NW", "",   "",   "",   "",   "",   "",   "",   "",   "",   "E", ],
                ["W", "",   "",   "",   "",   "",   "",   "",   "",   "",   "SE", ],
                ["SW", "",   "",   "",   "",   "",   "",   "",   "",   "SE", "",   ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "",   "",   "",   "",   "",   "",   "",   "",   "E", "",   ],
                ["",   "E", "",   "",   "",   "",   "",   "",   "",   "O4", "",   ],
                ["SE", "",   "",   "",   "",   "",   "",   "",   "W", "",   "",   ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "",   "",   "",   ],
                ["",   "SW", "",   "",   "",   "",   "",   "",   "E", "",   "",   ],
                ["",   "",   "O3", "",   "",   "",   "",   "",   "O4", "",   "",   ],
                ["",   "",   "NE", "",   "",   "",   "",   "NW", "",   "",   "",   ],
                ["",   "",   "",   "NE", "",   "N", "",   "NW", "",   "",   "",   ],
                ["",   "",   "",   "NE", "NW", "NE", "NW", "",   "",   "",   "",   ],
                ],
            ]
		];

        
        // Controls how many different wall styles we have for the same wall tile (e.g. one w/ vines, one w/o vines)
		private static const WALL_VARIATIONS: int = 2;

		public var objects: Array = [];

		private var parent: SimpleGameObject;
		public var radius: int = 0;

		public function WallManager(parent: SimpleGameObject, radius: int)
		{
			this.parent = parent;			
			this.radius = radius;
			
			draw(radius);
		}
		
		private function onAddedToStage(e: Event): void {
			draw(radius);
		}

		public function clear():void {
			parent.removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
			
			for each(var obj: DisplayObject in objects)
				Global.map.objContainer.removeObject(obj);			

			objects = [];
		}

		public function draw(radius: int):void {						
			this.radius = radius;

			clear();			

			if (radius == 0 || radius >= WALLS.length || WALLS[radius].length == 0) return;
			
			// Delay until the obj is in the stage
			if (parent.stage == null) {
				parent.addEventListener(Event.ADDED_TO_STAGE, onAddedToStage, false, 0, true);
				return;
			}

			var pos: Point = TileLocator.getMapCoord(parent.objX, parent.objY);

			var typeHash: int = wallTypeHash(pos.x, pos.y, radius);

			for (var y: int = 0; y < WALL_HEIGHT; y++) {
				for (var x: int = 0; x < WALL_WIDTH; x++) {
					if (WALLS[radius][typeHash][y][x] == "") continue;

					var mapX: int = pos.x + ( x - int(WALL_WIDTH/2));
					var mapY: int = pos.y + ( y - int(WALL_HEIGHT / 2));

					if (pos.y % 2 == 1 && y % 2 == 1) mapX += 1;

					pushWall(WALLS[radius][typeHash][y][x], mapX, mapY);
				}
			}
		}

		private function wallTypeHash(x: int, y: int, wallIdx: int) : int {
			return Math.max(0, ((x * parent.groupId * 0x1f1f1f1f) ^ y) % WALLS[wallIdx].length);
		}

		private function wallHash(x: int, y: int) : int {
			return Math.max(0, ((x * parent.groupId * 0x1f1f1f1f) ^ y) % WALL_VARIATIONS);
		}

		private function pushWall(wallName: String, x: int, y: int) : void {
			var pos: Point = TileLocator.getScreenCoord(x, y);
			wallName = "WALL_" + wallName + (wallName.charAt(0) == 'O' ? "" : "_" + wallHash(x, y).toString());
			var wall: SimpleObject = ObjectFactory.getSimpleObject(wallName, pos.x, pos.y, 1, false);

			Global.map.objContainer.addObject(wall);

			objects.push(wall);
		}
	}

}

